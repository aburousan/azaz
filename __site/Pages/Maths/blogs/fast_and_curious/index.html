<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.4 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="/libs/katex/katex.min.css">
     
   <link rel="stylesheet" href="/libs/highlight/styles/github.min.css">
   
  <link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/minimal-mistakes.css">
<link rel="stylesheet" href="/css/adjust.css">
<link rel="icon" href="/assets/favicon.jpg">
<!--[if IE ]>
<style>
  /* old IE unsupported flexbox fixes */
  .greedy-nav .site-title {
    padding-right: 3em;
  }
  .greedy-nav button {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
  }
</style>
<![endif]-->

   <title>Fast and Curious</title>  
  <!-- end custom head snippets -->
</head>
<body class="layout--single">
  <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">Azazaya</a>
        <ul class="visible-links">
          <li class="masthead__menu-item"><a href="/home_page/" >Home</a></li>
          <li class="masthead__menu-item"><a href="/Pages/Maths/Maths_Home/" >Maths Home</a></li>
          <li class="masthead__menu-item"><a href="/Pages/Physics/Physics_Home/" >Physics Home</a></li>
          <li class="masthead__menu-item"><a href="/Pages/Tags_page">Tags</a></li>
        </ul>
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

  <div class="initial-content">
    <div id="main" role="main">
      <div class="sidebar sticky">
        <div itemscope itemtype="https://schema.org/Person">
          <div class="author__avatar">
            <img src="/assets/minimal-mistakes/Rousan.jpeg" alt="Septimia Zenobia" itemprop="image">
          </div>
          <div class="author__content">
            <h3 class="author__name" itemprop="name">Kazi Abu Rousan</h3>
            <p class="author__bio" itemprop="description">Just some random dude.</p>
          </div>
          <div class="author__urls-wrapper">
            <button class="btn btn--inverse">Follow</button>
            <ul class="author__urls social-icons">
              <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
                <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Murshidabad, India</span></li>
                <li><a href="https://www.instagram.com/azavzya/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
              <li><a href="https://www.linkedin.com/in/kazi-abu-rousan-819848198/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
            </ul>
          </div>
        </div>
      </div>

<!-- Content appended here -->


  <script src="/libs/plotly/plotly.min.js"></script> 
  <script>
    // This function is used when calling `\fig{...}` See # Using \fig{...} below
    const PlotlyJS_json = async (div, url) => {
      response = await fetch(url); // get file
      fig = await response.json(); // convert it to json
      // Make the plot fit the screen responsively. See the documentation of plotly.js. https://plotly.com/javascript/responsive-fluid-layout/
      if (typeof fig.config === 'undefined') { fig["config"]={} }
      delete fig.layout.width
      delete fig.layout.height
      fig["layout"]["autosize"] = true
      fig["config"]["autosizable"] = true
      fig["config"]["responsive"] = true

      // make it easier to scroll throught the website rather than being blocked by a figure.
      fig.config["scrollZoom"] = false

      // PlotlyJS.savefig by default add the some more attribute to make a static plot.
      // Disable them to make the website fancier.
      delete fig.config.staticPlot
      delete fig.config.displayModeBar
      delete fig.config.doubleClick
      delete fig.config.showTips

      Plotly.newPlot(div, fig);
    };
  </script>
  


  <script src="/libs/clipboard.min.js"></script><div class="franklin-content">
<div class="franklin-toc"><ol><li><a href="#setting_up_our_test_problem">Setting up our test problem</a></li><li><a href="#why_choosing_this">Why choosing this?</a></li><li><a href="#writing_the_codes">Writing the codes</a><ol><li><a href="#julia">Julia</a></li><li><a href="#python">Python</a></li><li><a href="#c">C&#43;&#43;</a></li><li><a href="#fortran">Fortran</a></li><li><a href="#r">R</a></li></ol></li><li><a href="#running_and_result">Running and Result</a><ol><li><a href="#running_the_code">Running the code</a></li><li><a href="#results">Results</a></li><li><a href="#extra_remark">Extra Remark</a></li></ol></li></ol></div>
<h1 id="fast_and_curious_a_speed_comparison_of_different_languages"><a href="#fast_and_curious_a_speed_comparison_of_different_languages" class="header-anchor">Fast and Curious: A speed comparison of different languages</a></h1>
<p>In today&#39;s data-driven world, the choice of <strong>programming language</strong> can significantly impact performance and efficiency. As developers and researchers strive to solve increasingly complex problems, the need for speed becomes paramount. But how do different programming languages stack up against each other in terms of execution speed? 
<div class="row">
  <div class="container">
    <img class="left" src="/assets/Maths/blogs/fast_and_curious/fast_cou.png">
    <p>
    <i></i>.
    </p>
    <div style="clear: both"></div>      
  </div>
</div>
 In this blog post, we dive deep into a comparative analysis of five popular programming languages: Python, R, C&#43;&#43;, Fortran, and Julia. Each of these languages brings unique strengths to the table, from <strong><span style="color: green">Python&#39;s ease of use and vast ecosystem</span></strong> to <strong><span style="color: red">C&#43;&#43;&#39;s performance and control over system resources</span></strong>. Meanwhile, <strong><span style="color: blue">R shines in statistical computing</span></strong>, <strong><span style="color: brown">Fortran boasts its legacy in numerical analysis</span></strong>, and <strong><span style="color: purple">Julia has emerged as a powerful contender designed for high-performance computing</span></strong>.</p>
<p>Wwe will evaluate how each language performs when tasked with a computationally intensive operation‚Äîsumming prime numbers. By examining the results, we aim to uncover which language emerges as the fastest. 
  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
      As, I am not an expert, I urge people to maybe help me by sending me more nice examples. I am open to suggestions. 
  </fieldset>
  </p>
<h2 id="setting_up_our_test_problem"><a href="#setting_up_our_test_problem" class="header-anchor">Setting up our test problem</a></h2>
<p><strong>Prime Numbers</strong> <em>are natural numbers greater than 1 that have no divisors other than 1 and themselves</em>. First few prime numbers are \(2\), \(3\), \(5\), \(7\), \(11\), and so on.<br/> The problem of finding prime numbers and summing them within a given range is computationally interesting because, although <strong><span style="color: purple">prime numbers themselves are simple to define, their distribution and calculation &#40;especially for large numbers&#41; become increasingly complex as the range expands</span></strong>.</p>
<p>What our code does can be just written in 2 points:</p>
<ol>
<li><p>Find all prime numbers in a given range &#40;e.g. from \(2\) to \(N\)&#41;.</p>
</li>
<li><p>Sum these numbers to get the sum of all primes in that range.</p>
</li>
</ol>
<h2 id="why_choosing_this"><a href="#why_choosing_this" class="header-anchor">Why choosing this?</a></h2>
<p>Initially, I was think about matrix multiplication or maybe solving some ODE/PDE. But the <strong>sum of primes</strong> is really simple and also it has some properties.</p>
<ol>
<li><p>The problem requires checking each number in the range to determine whether it is prime, and this involves computational steps like trial division or more advanced algorithms. This makes the task computationally expensive for large ranges, ideal for testing the efficiency of different languages.</p>
</li>
<li><p>The problem allows you to scale the computational load by increasing the size of \(N\), the upper bound of the range. Larger ranges require more processing, giving you the flexibility to test performance under different levels of stress.</p>
</li>
<li><p>Unlike complex scientific problems that require specialized libraries, prime number summation is algorithmically simple. This makes the comparison fair, as it primarily tests the core performance of the language, not its library ecosystem.</p>
</li>
</ol>
<h2 id="writing_the_codes"><a href="#writing_the_codes" class="header-anchor">Writing the codes</a></h2>
<p>Let&#39;s see the codes in all \(5\) languages.</p>
<h3 id="julia"><a href="#julia" class="header-anchor">Julia</a></h3>

  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
      This website is made using Franklin.jl so have to use put julia before any one of others. Sorry ;&#41; 
  </fieldset>
  
<pre><code class="language-julia">function sieve_of_eratosthenes&#40;N&#41;
    primes &#61; trues&#40;N&#41;
    for p in 2:floor&#40;Int, sqrt&#40;N&#41;&#41;
        if primes&#91;p&#93;
            for i in p^2:p:N
                primes&#91;i&#93; &#61; false
            end
        end
    end
    return sum&#40;p for p in 2:N if primes&#91;p&#93;&#41;
end
N &#61; 10^8
@time result &#61; sieve_of_eratosthenes&#40;N&#41;
println&#40;&quot;Sum of primes: &#36;result&quot;&#41;</code></pre>
<p>I have saved this file as <code>primes.jl</code>.</p>
<h3 id="python"><a href="#python" class="header-anchor">Python</a></h3>
<p>Let&#39;s see now the python code.</p>
<pre><code class="language-python">import time
def sieve_of_eratosthenes&#40;N&#41;:
    primes &#61; &#91;True&#93; * &#40;N &#43; 1&#41;
    p &#61; 2
    while p * p &lt;&#61; N:
        if primes&#91;p&#93;:
            for i in range&#40;p * p, N &#43; 1, p&#41;:
                primes&#91;i&#93; &#61; False
        p &#43;&#61; 1
    return sum&#40;p for p in range&#40;2, N&#43;1&#41; if primes&#91;p&#93;&#41;
N &#61; 10**8
start_time &#61; time.time&#40;&#41;
result &#61; sieve_of_eratosthenes&#40;N&#41;
end_time &#61; time.time&#40;&#41;
print&#40;f&quot;Sum of primes: &#123;result&#125;&quot;&#41;
print&#40;f&quot;Time taken: &#123;end_time - start_time&#125; seconds&quot;&#41;</code></pre>
<p>Save this one as <code>primes.py</code>.</p>
<h3 id="c"><a href="#c" class="header-anchor">C&#43;&#43;</a></h3>
<p>For C&#43;&#43;, ;&#41;,</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;chrono&gt;
#include &lt;cstring&gt;

long long sieve_of_eratosthenes&#40;int N&#41; &#123;
    unsigned char* primes &#61; new unsigned char&#91;N &#43; 1&#93;;
    memset&#40;primes, 1, N &#43; 1&#41;;
    long long sum &#61; 0;
    for &#40;int p &#61; 2; p * p &lt;&#61; N; &#43;&#43;p&#41; &#123;
        if &#40;primes&#91;p&#93;&#41; &#123;
            for &#40;int i &#61; p * p; i &lt;&#61; N; i &#43;&#61; p&#41;
                primes&#91;i&#93; &#61; 0;
        &#125;
    &#125;
    for &#40;int p &#61; 2; p &lt;&#61; N; &#43;&#43;p&#41; &#123;
        if &#40;primes&#91;p&#93;&#41; &#123;
            sum &#43;&#61; p;
        &#125;
    &#125;
    delete&#91;&#93; primes;
    return sum;
&#125;
int main&#40;&#41; &#123;
    int N &#61; 100000000;
    auto start &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    long long result &#61; sieve_of_eratosthenes&#40;N&#41;;
    auto end &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    std::chrono::duration&lt;double&gt; duration &#61; end - start;
    std::cout &lt;&lt; &quot;Sum of primes: &quot; &lt;&lt; result &lt;&lt; std::endl;
    std::cout &lt;&lt; &quot;Time taken: &quot; &lt;&lt; duration.count&#40;&#41; &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;
    return 0;
&#125;</code></pre>
<p>
  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
  </p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
    #include &lt;vector&gt;
    #include &lt;cmath&gt;
    #include &lt;chrono&gt;
    long long sieve_of_eratosthenes&#40;int N&#41; &#123;
    std::vector&lt;bool&gt; primes&#40;N &#43; 1, true&#41;;
    long long sum &#61; 0;
    for &#40;int p &#61; 2; p * p &lt;&#61; N; &#43;&#43;p&#41; &#123;
        if &#40;primes&#91;p&#93;&#41; &#123;
            for &#40;int i &#61; p * p; i &lt;&#61; N; i &#43;&#61; p&#41;
                primes&#91;i&#93; &#61; false;
        &#125;
    &#125;
    for &#40;int p &#61; 2; p &lt;&#61; N; &#43;&#43;p&#41; &#123;
        if &#40;primes&#91;p&#93;&#41; &#123;
            sum &#43;&#61; p;
        &#125;
    &#125;
    return sum;
    &#125;
    int main&#40;&#41; &#123;
    int N &#61; 100000000;
    auto start &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    long long result &#61; sieve_of_eratosthenes&#40;N&#41;;
    auto end &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    std::chrono::duration&lt;double&gt; duration &#61; end - start;
    std::cout &lt;&lt; &quot;Sum of primes: &quot; &lt;&lt; result &lt;&lt; std::endl;
    std::cout &lt;&lt; &quot;Time taken: &quot; &lt;&lt; duration.count&#40;&#41; &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;
    return 0;
    &#125;</code></pre>
<p>This was the previous code.</p>
<p>
  </fieldset>
   Saving this as <code>primes.cpp</code>.</p>
<h3 id="fortran"><a href="#fortran" class="header-anchor">Fortran</a></h3>
<p>For this one,</p>
<pre><code class="language-fortran">program sum_of_primes
    implicit none
    integer :: N, p, i
    integer&#40;8&#41; :: sum
    logical, allocatable :: primes&#40;:&#41;
    integer :: start, finish, count_rate
    N &#61; 100000000
    allocate&#40;primes&#40;N&#43;1&#41;&#41;
    primes &#61; .true.
    sum &#61; 0
    call system_clock&#40;start, count_rate&#41;

    do p &#61; 2, int&#40;sqrt&#40;real&#40;N&#41;&#41;&#41;
        if &#40;primes&#40;p&#41;&#41; then
            do i &#61; p*p, N, p
                primes&#40;i&#41; &#61; .false.
            end do
        end if
    end do

    do p &#61; 2, N
        if &#40;primes&#40;p&#41;&#41; sum &#61; sum &#43; p
    end do
    call system_clock&#40;finish, count_rate&#41;
    print *, &quot;Sum of primes: &quot;, sum
    print *, &quot;Time taken: &quot;, real&#40;finish - start&#41; / real&#40;count_rate&#41;, &quot; seconds&quot;
end program sum_of_primes</code></pre>
<p>Save this one as <code>primes.f90</code></p>
<h3 id="r"><a href="#r" class="header-anchor">R</a></h3>
<p>For R, the code is,</p>
<pre><code class="language-R">sieve_of_eratosthenes &lt;- function&#40;N&#41; &#123;
  primes &lt;- rep&#40;TRUE, N&#41;
  p &lt;- 2
  while &#40;p^2 &lt;&#61; N&#41; &#123;
    if &#40;primes&#91;p&#93;&#41; &#123;
      for &#40;i in seq&#40;p^2, N, p&#41;&#41; &#123;
        primes&#91;i&#93; &lt;- FALSE
      &#125;
    &#125;
    p &lt;- p &#43; 1
  &#125;
  return&#40;sum&#40;which&#40;primes &#61;&#61; TRUE&#41;&#91;2:N&#93;&#41;&#41;
&#125;
N &lt;- 10^8
system.time&#40;&#123;
  result &lt;- sieve_of_eratosthenes&#40;N&#41;
&#125;&#41;
print&#40;result&#41;</code></pre>
<p>Save this final one as <code>primes.R</code>.</p>
<h2 id="running_and_result"><a href="#running_and_result" class="header-anchor">Running and Result</a></h2>
<p>Let&#39;s see the running commands and results.</p>
<h3 id="running_the_code"><a href="#running_the_code" class="header-anchor">Running the code</a></h3>
<p>To run the codes, I will use a <code>bash</code> script. Here it is:</p>
<pre><code class="language-shell">#&#33;/bin/bash
rm -f primes_cpp primes_fortran
g&#43;&#43; primes.cpp -o primes_cpp
if &#91; &#36;? -ne 0 &#93;; then
    echo &quot;C&#43;&#43; compilation failed&quot;
    exit 1
fi
gfortran primes.f90 -o primes_fortran
if &#91; &#36;? -ne 0 &#93;; then
    echo &quot;Fortran compilation failed&quot;
    exit 1
fi
for i in &#123;1..11&#125;
do
    echo &quot;Running Python iteration &#36;i&quot;
    python3 primes.py &gt;&gt; output_python.txt
    echo &quot;Iteration &#36;i completed&quot; &gt;&gt; output_python.txt
    echo &quot;-----------------------------------&quot; &gt;&gt; output_python.txt
    
    echo &quot;Running Julia iteration &#36;i&quot;
    julia primes.jl &gt;&gt; output_julia.txt
    echo &quot;Iteration &#36;i completed&quot; &gt;&gt; output_julia.txt
    echo &quot;-----------------------------------&quot; &gt;&gt; output_julia.txt

    echo &quot;Running C&#43;&#43; iteration &#36;i&quot;
    ./primes_cpp &gt;&gt; output_cpp.txt
    echo &quot;Iteration &#36;i completed&quot; &gt;&gt; output_cpp.txt
    echo &quot;-----------------------------------&quot; &gt;&gt; output_cpp.txt
    
    echo &quot;Running Fortran iteration &#36;i&quot;
    ./primes_fortran &gt;&gt; output_fortran.txt
    echo &quot;Iteration &#36;i completed&quot; &gt;&gt; output_fortran.txt
    echo &quot;-----------------------------------&quot; &gt;&gt; output_fortran.txt
    
    echo &quot;Running R iteration &#36;i&quot;
    Rscript primes.R &gt;&gt; output_r.txt
    echo &quot;Iteration &#36;i completed&quot; &gt;&gt; output_r.txt
    echo &quot;-----------------------------------&quot; &gt;&gt; output_r.txt
done
echo &quot;All iterations completed.&quot;</code></pre>
<p>Save this as <code>run_tests.sh</code> in the same folder as all the previous code.<br/> To run this, use the two commands:</p>
<pre><code class="language-julia">chmod &#43;x run_tests.sh
./run_tests.sh</code></pre>
<p>This will run all the codes \(11\) times and save each iteration output in the respective output txt files. Once done, we have the results&#40;this is due to what happens when we run julia for first time. We will use last \(10\)&#41;.</p>
<h3 id="results"><a href="#results" class="header-anchor">Results</a></h3>
<p>Let&#39;s see results of each one:</p>
<ol>
<li><p>For <code>Julia</code>:</p>
</li>
</ol>
<table><tr><th align="right">Iteration</th><th align="right">Sum of Primes</th><th align="right">Time Taken &#40;seconds&#41;</th><th align="right">Allocations</th><th align="right">Compilation Time &#40;&#37;&#41;</th></tr><tr><td align="right">\(1\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.914137\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.80\)</td></tr><tr><td align="right">\(2\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.916980\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.79\)</td></tr><tr><td align="right">\(3\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.917002\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.80\)</td></tr><tr><td align="right">\(4\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.915913\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.86\)</td></tr><tr><td align="right">\(5\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.929013\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.83\)</td></tr><tr><td align="right">\(6\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.920761\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.85\)</td></tr><tr><td align="right">\(7\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.924105\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.81\)</td></tr><tr><td align="right">\(8\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.919019\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.79\)</td></tr><tr><td align="right">\(9\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.917901\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.73\)</td></tr><tr><td align="right">\(10\)</td><td align="right">\(279209790387276\)</td><td align="right">\(0.919431\)</td><td align="right">\(230.34 \, \text{k}\), \(23.432 \, \text{MiB}\)</td><td align="right">\(6.78\)</td></tr></table>
<p>Clearly, we can see who is the winner.</p>
<ol start="2">
<li><p>For <code>C&#43;&#43;</code>:</p>
</li>
</ol>
<table><tr><th align="right">Iteration</th><th align="right">Sum of Primes</th><th align="right">Time Taken &#40;seconds&#41;</th></tr><tr><td align="right">\(1\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.29177\)</td></tr><tr><td align="right">\(2\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23304\)</td></tr><tr><td align="right">\(3\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23141\)</td></tr><tr><td align="right">\(4\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23800\)</td></tr><tr><td align="right">\(5\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23524\)</td></tr><tr><td align="right">\(6\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23862\)</td></tr><tr><td align="right">\(7\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23189\)</td></tr><tr><td align="right">\(8\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23681\)</td></tr><tr><td align="right">\(9\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23351\)</td></tr><tr><td align="right">\(10\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.23072\)</td></tr></table>

  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
      | Iteration | Sum of Primes          | Time Taken &#40;seconds&#41;         |<br/> |‚Äì‚Äì‚Äì‚Äì‚Äì-|‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì|‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì|<br/> | \(1\)       | \(279209790387276\)       | \(10.8402\)                   |<br/> | \(2\)       | \(279209790387276\)       | \(11.0474\)                   |<br/> | \(3\)       | \(279209790387276\)       | \(12.0759\)                   |<br/> | \(4\)       | \(279209790387276\)       | \(11.1812\)                   |<br/> | \(5\)       | \(279209790387276\)       | \(11.1218\)                   |<br/> | \(6\)       | \(279209790387276\)       | \(11.1408\)                   |<br/> | \(7\)       | \(279209790387276\)       | \(11.1379\)                   |<br/> | \(8\)       | \(279209790387276\)       | \(10.9725\)                   |<br/> | \(9\)       | \(279209790387276\)       | \(11.0904\)                   |<br/> | \(10\)      | \(279209790387276\)       | \(11.0407\)                   |<br/> Unexpected&#33;... I don&#39;t know it is this slow due to my machine or not. Can someone verify this?</p>
<p>This is previously here. I was not able to understand why C&#43;&#43; is slow&#33;. But a nice person in the comment point that out.&#40;See the comment of Yolhan&#41;. 
  </fieldset>
  
<ol start="3">
<li><p>For <code>Fortran</code>:</p>
</li>
</ol>
<table><tr><th align="right">Iteration</th><th align="right">Sum of Primes</th><th align="right">Time Taken &#40;seconds&#41;</th></tr><tr><td align="right">\(1\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53100002\)</td></tr><tr><td align="right">\(2\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.54400003\)</td></tr><tr><td align="right">\(3\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53999996\)</td></tr><tr><td align="right">\(4\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53499997\)</td></tr><tr><td align="right">\(5\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53799999\)</td></tr><tr><td align="right">\(6\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53100002\)</td></tr><tr><td align="right">\(7\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53600001\)</td></tr><tr><td align="right">\(8\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.54299998\)</td></tr><tr><td align="right">\(9\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.54600000\)</td></tr><tr><td align="right">\(10\)</td><td align="right">\(279209790387276\)</td><td align="right">\(1.53999996\)</td></tr></table>
<ol start="4">
<li><p>For <code>R</code>:</p>
</li>
</ol>
<p>Here Elapsed Time is the Time Taken.</p>
<table><tr><th align="right">Iteration</th><th align="right">Elapsed Time &#40;seconds&#41;</th><th align="right">User Time &#40;seconds&#41;</th><th align="right">System Time &#40;seconds&#41;</th></tr><tr><td align="right">\(1\)</td><td align="right">\(14.953\)</td><td align="right">\(13.075\)</td><td align="right">\(1.866\)</td></tr><tr><td align="right">\(2\)</td><td align="right">\(14.750\)</td><td align="right">\(12.848\)</td><td align="right">\(1.903\)</td></tr><tr><td align="right">\(3\)</td><td align="right">\(14.780\)</td><td align="right">\(12.897\)</td><td align="right">\(1.885\)</td></tr><tr><td align="right">\(4\)</td><td align="right">\(14.753\)</td><td align="right">\(12.840\)</td><td align="right">\(1.913\)</td></tr><tr><td align="right">\(5\)</td><td align="right">\(14.952\)</td><td align="right">\(13.098\)</td><td align="right">\(1.856\)</td></tr><tr><td align="right">\(6\)</td><td align="right">\(15.129\)</td><td align="right">\(13.192\)</td><td align="right">\(1.938\)</td></tr><tr><td align="right">\(7\)</td><td align="right">\(14.956\)</td><td align="right">\(13.067\)</td><td align="right">\(1.890\)</td></tr><tr><td align="right">\(8\)</td><td align="right">\(14.788\)</td><td align="right">\(12.882\)</td><td align="right">\(1.908\)</td></tr><tr><td align="right">\(9\)</td><td align="right">\(14.970\)</td><td align="right">\(13.090\)</td><td align="right">\(1.880\)</td></tr><tr><td align="right">\(10\)</td><td align="right">\(15.529\)</td><td align="right">\(13.632\)</td><td align="right">\(1.898\)</td></tr></table>
<ol start="5">
<li><p>For <code>python</code>:</p>
</li>
</ol>
<table><tr><th align="right">Iteration</th><th align="right">Sum of Primes</th><th align="right">Time Taken &#40;seconds&#41;</th></tr><tr><td align="right">\(1\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.59793257713318\)</td></tr><tr><td align="right">\(2\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.903280019760132\)</td></tr><tr><td align="right">\(3\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.65820622444153\)</td></tr><tr><td align="right">\(4\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.870051622390747\)</td></tr><tr><td align="right">\(5\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.976346492767334\)</td></tr><tr><td align="right">\(6\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.489915370941162\)</td></tr><tr><td align="right">\(7\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.572935581207275\)</td></tr><tr><td align="right">\(8\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.436674118041992\)</td></tr><tr><td align="right">\(9\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.50352454185486\)</td></tr><tr><td align="right">\(10\)</td><td align="right">\(279209790387276\)</td><td align="right">\(19.746686935424805\)</td></tr></table>
<p>Let&#39;s see a plot which shows all of these:</p>
<pre><code class="language-julia">using Plots; plotlyjs&#40;&#41;
fortran_times &#61; &#91;1.53100002, 1.54400003, 1.53999996, 1.53499997, 1.53799999, 1.53100002, 1.53600001, 1.54299998, 1.54600000, 1.53999996&#93;
julia_times &#61; &#91;0.914137, 0.916980, 0.917002, 0.915913, 0.929013, 0.920761, 0.924105, 0.919019, 0.917901, 0.919431&#93;
cpp_times &#61; &#91;1.29177, 1.23304, 1.23141, 1.23800, 1.23524, 1.23862, 1.23189, 1.23681, 1.23351, 1.23072&#93;
r_times &#61; &#91;14.953, 14.750, 14.780, 14.753, 14.952, 15.129, 14.956, 14.788, 14.970, 15.529&#93;
python_times &#61; &#91;19.59793257713318, 19.903280019760132, 19.65820622444153, 19.870051622390747, 19.976346492767334, 19.489915370941162, 19.572935581207275, 19.436674118041992, 19.50352454185486, 19.746686935424805&#93;
iterations &#61; 1:10
p &#61; plot&#40;iterations, fortran_times, label&#61;&quot;Fortran&quot;, lw&#61;2, marker&#61;:o, markersize&#61;6&#41;
plot&#33;&#40;iterations, julia_times, label&#61;&quot;Julia&quot;, lw&#61;2, marker&#61;:o, markersize&#61;6&#41;
plot&#33;&#40;iterations, cpp_times, label&#61;&quot;C&#43;&#43;&quot;, lw&#61;2, marker&#61;:o, markersize&#61;6&#41;
plot&#33;&#40;iterations, r_times, label&#61;&quot;R&quot;, lw&#61;2, marker&#61;:o, markersize&#61;6&#41;
plot&#33;&#40;iterations, python_times, label&#61;&quot;Python&quot;, lw&#61;2, marker&#61;:o, markersize&#61;6&#41;
xlabel&#33;&#40;&quot;Iterations&quot;&#41;
ylabel&#33;&#40;&quot;Time Taken &#40;seconds&#41;&quot;&#41;
title&#33;&#40;&quot;Time Comparison of Sum of Primes Across Different Languages&quot;&#41;
plot&#33;&#40;legend&#61;:topright&#41;
#savefig&#40;p, joinpath&#40;@OUTPUT, &quot;fast_cou11.json&quot;&#41;&#41;</code></pre>
<p><div id="fdpjmf" style=""></div>
<script>
graphDiv = document.getElementById("fdpjmf");
plotlyPromise = PlotlyJS_json(graphDiv, '/assets/Pages/Maths/blogs/fast_and_curious/code/output/fast_cou11.json');
</script>
 It very clearly shows which one is superior and which is not for this particular code. Now, we can modify the codes for more efficiency and optimization &#40;like using Numpy/Numba, StaticArray, Eigen, OpenMP , etc&#41;, but here for this blog I think it&#39;s enough. We will continue for discussion in some other blog.</p>
<p><hr /> Wihout the system information it&#39;s really not a speed test. So, Here is my information:<br/> <strong><span style="color: red">System Information:</span></strong><br/> &#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;<br/> Operating System: GNU/Linux<br/> Kernel Version: 6.8.0-45-generic<br/> CPU: Model name: Intel&#40;R&#41; Core&#40;TM&#41; i5-8250U CPU @ 1.60GHz<br/> Architecture: x86_64<br/> Number of Cores: 8<br/> Shell: /usr/bin/zsh<br/> <strong><span style="color: red">Language Versions:</span></strong><br/> &#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;<br/> Fortran Version: GNU Fortran &#40;conda-forge gcc 12.4.0-0&#41; 12.4.0<br/> C&#43;&#43; Version: g&#43;&#43; &#40;conda-forge gcc 12.4.0-0&#41; 12.4.0<br/> R Version: R version 4.4.1 &#40;2024-06-14&#41; ‚Äì &quot;Race for Your Life&quot;<br/> Python Version: Python 3.12.2<br/> Julia Version: julia version 1.11.1<br/></p>
<p><hr /> To generate this use the following script:</p>
<pre><code class="language-shell">#&#33;/bin/bash
output_file&#61;&quot;system_info.txt&quot;
&#123;
    echo &quot;System Information:&quot;
    echo &quot;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&quot;
    echo &quot;Operating System: &#36;&#40;uname -o&#41;&quot;
    echo &quot;Kernel Version: &#36;&#40;uname -r&#41;&quot;
    echo &quot;CPU: &#36;&#40;lscpu | grep &#39;Model name&#39;&#41;&quot;
    echo &quot;Architecture: &#36;&#40;uname -m&#41;&quot;
    echo &quot;Number of Cores: &#36;&#40;nproc&#41;&quot;
    echo &quot;Shell: &#36;SHELL&quot;
    echo &quot;Home Directory: &#36;HOME&quot;
    echo &quot;&quot;
    echo &quot;Language Versions:&quot;
    echo &quot;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&#61;&quot;
    if command -v gfortran &amp;&gt; /dev/null; then
        echo -n &quot;Fortran Version: &quot;
        gfortran --version | head -n 1
    else
        echo &quot;Fortran: Not installed&quot;
    fi
    if command -v g&#43;&#43; &amp;&gt; /dev/null; then
        echo -n &quot;C&#43;&#43; Version: &quot;
        g&#43;&#43; --version | head -n 1
    else
        echo &quot;C&#43;&#43;: Not installed&quot;
    fi
    if command -v R &amp;&gt; /dev/null; then
        echo -n &quot;R Version: &quot;
        R --version | head -n 1
    else
        echo &quot;R: Not installed&quot;
    fi
    if command -v python &amp;&gt; /dev/null; then
        echo -n &quot;Python Version: &quot;
        python --version
    else
        echo &quot;Python: Not installed&quot;
    fi
    if command -v julia &amp;&gt; /dev/null; then
        echo -n &quot;Julia Version: &quot;
        julia --version
    else
        echo &quot;Julia: Not installed&quot;
    fi
&#125; &gt; &quot;&#36;output_file&quot;
echo &quot;System information and language versions have been saved to &#36;output_file&quot;</code></pre>
<h3 id="extra_remark"><a href="#extra_remark" class="header-anchor">Extra Remark</a></h3>
<p>After positing this, many people get offended. I get your point, but many people has done same and also many languages show this as their strength. Also, I will keep this blog as I am learning new things from good peoples&#40;like the one in the comments&#41;.</p>

  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
      From a physics student or teacher&#39;s point of view, comparing the speed of different programming languages is not necessarily misleading but needs to be done with proper context.</p>
<p>Different languages have different strengths and are suited to different tasks. For instance, in computational physics, the speed of a language can be crucial for simulations or large-scale numerical problems. Comparing languages based on speed can be useful for choosing the right tool for specific problems.</p>
<p>However, it is important to keep in mind that speed isn&#39;t the only factor. Other considerations, like ease of development, the availability of scientific libraries, and the ability to handle complex algorithms, are also important in physics. Therefore, speed comparisons can be informative as long as they are done with a clear understanding of the problem being solved and the resources available. 
  </fieldset>
  
<p>Also, let&#39;s write a code which uses libraries and uses the strength of each of the languages. I will just run \(1\) iteration &#40;I was planning to do this in some seperate blog but whatever&#41;.</p>
<ol>
<li><p><code>C&#43;&#43;</code><br/></p>
</li>
</ol>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;chrono&gt;
#include &lt;vector&gt;
#include &lt;primesieve.hpp&gt;
int main&#40;&#41; &#123;
    int N &#61; 100000000;
    std::vector&lt;uint64_t&gt; primes;
    auto start &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    primesieve::generate_primes&#40;N, &amp;primes&#41;;
    uint64_t sum &#61; 0;
    for &#40;const auto&amp; prime : primes&#41; &#123;
        sum &#43;&#61; prime;
    &#125;
    auto end &#61; std::chrono::high_resolution_clock::now&#40;&#41;;
    std::chrono::duration&lt;double&gt; duration &#61; end - start;
    std::cout &lt;&lt; &quot;Sum of primes: &quot; &lt;&lt; sum &lt;&lt; std::endl;
    std::cout &lt;&lt; &quot;Time taken: &quot; &lt;&lt; duration.count&#40;&#41; &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;
    return 0;
&#125;</code></pre>
<p>Output is : </p>
<pre><code class="language-julia">Sum of primes: 279209790387276
Time taken: 0.108293 seconds</code></pre>
<ol start="2">
<li><p><code>Julia</code><br/></p>
</li>
</ol>
<pre><code class="language-julia">using Primes
function sum_of_primes&#40;N::Int&#41;
    return sum&#40;primes&#40;2,N&#41;&#41;
end
N &#61; 10^8
@time result &#61; sum_of_primes&#40;N&#41;
println&#40;&quot;Sum of primes: &#36;result&quot;&#41;</code></pre>
<p>Output is : </p>
<pre><code class="language-julia">0.307588 seconds &#40;9 allocations: 69.530 MiB, 11.76&#37; gc time&#41;
Sum of primes: 279209790387276</code></pre>
<ol start="3">
<li><p><code>Fortran</code><br/></p>
</li>
</ol>
<pre><code class="language-fortran">program sum_of_primes
    implicit none
    integer, parameter :: N &#61; 100000000
    logical, allocatable :: primes&#40;:&#41;
    integer :: sum, p
    integer :: start_time, end_time, count_rate
    allocate&#40;primes&#40;N &#43; 1&#41;&#41;
    primes &#61; .true.  &#33; Assume all numbers are prime initially
    primes&#40;1&#41; &#61; .false.  &#33; 1 is not a prime number
    call system_clock&#40;start_time, count_rate&#41;
    do p &#61; 2, int&#40;sqrt&#40;real&#40;N&#41;&#41;&#41;
        if &#40;primes&#40;p&#41;&#41; then
            primes&#40;p*p:N&#41; &#61; .false.
        end if
    end do
    sum &#61; 0
    do p &#61; 2, N
        if &#40;primes&#40;p&#41;&#41; sum &#61; sum &#43; p
    end do
    call system_clock&#40;end_time, count_rate&#41;
    print *, &quot;Sum of primes up to &quot;, N, &quot; is: &quot;, sum
    print *, &quot;Time taken: &quot;, real&#40;end_time - start_time&#41; / real&#40;count_rate&#41;, &quot; seconds&quot;
    deallocate&#40;primes&#41;
end program sum_of_primes</code></pre>
<p>Output is : </p>
<pre><code class="language-julia">Sum of primes up to    100000000  is:            5
 Time taken:   0.370000005      seconds</code></pre>
<ol start="4">
<li><p><code>R</code><br/></p>
</li>
</ol>
<pre><code class="language-R">library&#40;primes&#41;
sieve_of_eratosthenes &lt;- function&#40;N&#41; &#123;
  prime_numbers &lt;- generate_primes&#40;2, N&#41;
  return&#40;sum&#40;prime_numbers&#41;&#41;
&#125;
N &lt;- 10^8
system.time&#40;&#123;
  result &lt;- sieve_of_eratosthenes&#40;N&#41;
&#125;&#41;
print&#40;result&#41;</code></pre>
<p>Output is :</p>
<pre><code class="language-julia">user  system elapsed 
0.493   0.028   0.520 
&#91;1&#93; 2.792098e&#43;14</code></pre>
<ol start="5">
<li><p><code>Python</code><br/></p>
</li>
</ol>
<pre><code class="language-python">import time
from sympy import primerange
def sum_of_primes&#40;N&#41;:
    return sum&#40;primerange&#40;2, N &#43; 1&#41;&#41;
N &#61; 10**8
start_time &#61; time.time&#40;&#41;
result &#61; sum_of_primes&#40;N&#41;
end_time &#61; time.time&#40;&#41;
print&#40;f&quot;Sum of primes: &#123;result&#125;&quot;&#41;
print&#40;f&quot;Time taken: &#123;end_time - start_time&#125; seconds&quot;&#41;</code></pre>
<p>Output is : </p>
<pre><code class="language-julia">Sum of primes: 279209790387276
Time taken: 68.92483925819397 seconds</code></pre>
<p>Well...Now <code>C&#43;&#43;</code> is the boss now&#33;<br/> I have you have learnt something new and enjoyed it. 
  <fieldset class=" note"><legend class=" note-legend"> üìù Note</legend>
      Just a request. If possible please run the codes and let me know what you get&#33; 
  </fieldset>
   If you have some queries, do let me know in the comments or contact me using my using the informations that are given on the page <a href="/Pages/about_me/">About Me</a>.</p>

<button onclick="window.history.back()">Go Back</button>


<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = https://rousan.netlify.app/pages/math/blogs/fast_and_curious/;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://https-rousan-netlify-app.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<div class="page-foot">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Kazi Abu Rousan. Last modified: October 20, 2024.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>



<!-- Collapsible button example -->
<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;
    
    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }
  </script>
  <!-- End collapsible button example --></div><!-- CONTENT ENDS HERE -->

      </div> <!-- closure of main -->
    </div>   <!-- closure of class initial--content -->

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
        <!-- end custom footer snippets -->
        <div class="page__footer-follow">
          <ul class="social-icons">
            <li><strong>Follow:</strong></li>
            <li><a href="https://twitter.com/AustinRousan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
            <li><a href="https://github.com/aburousan" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/kazi-abu-rousan-819848198/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
            <li><a href="https://www.instagram.com/azavzya/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>


          </ul>
        </div>
        <div class="page__footer-copyright">&copy; Kazi Abu Rousan. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/libs/minimal-mistakes/main.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" crossorigin="anonymous"></script>

    
        <script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/contrib/auto-render.min.js"></script>
<script>renderMathInElement(document.body)</script>

    
    
        <script src="/libs/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>


<script>
  (function(){
  
    // Get the elements.
    // - the 'pre' element.
    // - the 'div' with the 'paste-content' id.
  
    var pre = document.getElementsByTagName('pre');
  
    // Add a copy button in the 'pre' element.
    // which only has the className of 'language-' or ' hljs'(if enable highlight.js pre-render).
  
    for (var i = 0; i < pre.length; i++) {
      var tag_name = pre[i].children[0].className
                var isLanguage = tag_name.startsWith('language-') || tag_name.endsWith(' hljs');
      if ( isLanguage ) {
        var button           = document.createElement('button');
            button.className = 'copy-button';
            button.textContent = 'Copy';
  
            pre[i].appendChild(button);
      }
    };
  
    // Run Clipboard
  
    var copyCode = new Clipboard('.copy-button', {
      target: function(trigger) {
        return trigger.previousElementSibling;
      }
    });
  
    // On success:
    // - Change the "Copy" text to "Copied".
    // - Swap it to "Copy" in 2s.
    // - Lead user to the "contenteditable" area with Velocity scroll.
  
    copyCode.on('success', function(event) {
      event.clearSelection();
      event.trigger.textContent = 'Copied';
      window.setTimeout(function() {
        event.trigger.textContent = 'Copy';
      }, 2000);
  
    });
  
    // On error (Safari):
    // - Change the  "Press Ctrl+C to copy"
    // - Swap it to "Copy" in 2s.
  
    copyCode.on('error', function(event) {
      event.trigger.textContent = 'Press "Ctrl + C" to copy';
      window.setTimeout(function() {
        event.trigger.textContent = 'Copy';
      }, 5000);
    });
  
  })();
  </script>